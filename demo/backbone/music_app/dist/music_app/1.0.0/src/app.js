!function(){var t,e,n,r,i,s,a,o,u,l,c,h,f;t=function(t){return function(){var n=this,r=n._,i={},s=Array.prototype,a=Object.prototype,o=Function.prototype,u=s.push,l=s.slice,c=s.concat,h=a.toString,f=a.hasOwnProperty,d=Array.isArray,p=Object.keys,v=o.bind,g=function(t){return t instanceof g?t:this instanceof g?void(this._wrapped=t):new g(t)};t=t=g,t._=g,g.VERSION="1.6.0",g.each=g.forEach=function(t,e,n){if(null==t)return t;if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var a=g.keys(t),r=0,s=a.length;s>r;r++)if(e.call(n,t[a[r]],a[r],t)===i)return;return t},g.map=g.collect=function(t,e,n){var r=[];return null==t?r:(g.each(t,function(t,i,s){r.push(e.call(n,t,i,s))}),r)};var m="Reduce of empty array with no initial value";g.reduce=g.foldl=g.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g.each(t,function(t,s,a){i?n=e.call(r,n,t,s,a):(n=t,i=!0)}),!i)throw new TypeError(m);return n},g.reduceRight=g.foldr=function(t,e,n,r){var i=arguments.length>2;null==t&&(t=[]);var s=t.length;if(s!==+s){var a=g.keys(t);s=a.length}if(g.each(t,function(o,u,l){u=a?a[--s]:--s,i?n=e.call(r,n,t[u],u,l):(n=t[u],i=!0)}),!i)throw new TypeError(m);return n},g.find=g.detect=function(t,e,n){var r;return g.some(t,function(t,i,s){return e.call(n,t,i,s)?(r=t,!0):void 0}),r},g.filter=g.select=function(t,e,n){var r=[];return null==t?r:(g.each(t,function(t,i,s){e.call(n,t,i,s)&&r.push(t)}),r)},g.reject=function(t,e,n){return g.filter(t,g.negate(e),n)},g.every=g.all=function(t,e,n){e||(e=g.identity);var r=!0;return null==t?r:(g.each(t,function(t,s,a){return(r=r&&e.call(n,t,s,a))?void 0:i}),!!r)},g.some=g.any=function(t,e,n){e||(e=g.identity);var r=!1;return null==t?r:(g.each(t,function(t,s,a){return r||(r=e.call(n,t,s,a))?i:void 0}),!!r)},g.contains=g.include=function(t,e){return null==t?!1:t.length===+t.length?g.indexOf(t,e)>=0:g.some(t,function(t){return t===e})},g.invoke=function(t,e){var n=l.call(arguments,2),r=g.isFunction(e);return g.map(t,function(t){return(r?e:t[e]).apply(t,n)})},g.pluck=function(t,e){return g.map(t,g.property(e))},g.where=function(t,e){return g.filter(t,g.matches(e))},g.findWhere=function(t,e){return g.find(t,g.matches(e))},g.max=function(t,e,n){var r,i,s=-1/0,a=-1/0;if(!e&&g.isArray(t))for(var o=0,u=t.length;u>o;o++)r=t[o],r>s&&(s=r);else g.each(t,function(t,r,o){i=e?e.call(n,t,r,o):t,(i>a||i===-1/0&&s===-1/0)&&(s=t,a=i)});return s},g.min=function(t,e,n){var r,i,s=1/0,a=1/0;if(!e&&g.isArray(t))for(var o=0,u=t.length;u>o;o++)r=t[o],s>r&&(s=r);else g.each(t,function(t,r,o){i=e?e.call(n,t,r,o):t,(a>i||1/0===i&&1/0===s)&&(s=t,a=i)});return s},g.shuffle=function(t){var e,n=0,r=[];return g.each(t,function(t){e=g.random(n++),r[n-1]=r[e],r[e]=t}),r},g.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=g.values(t)),t[g.random(t.length-1)]):g.shuffle(t).slice(0,Math.max(0,e))};var y=function(t,e){return null==t?g.identity:g.isFunction(t)?e?function(){return t.apply(e,arguments)}:t:g.property(t)};g.sortBy=function(t,e,n){return e=y(e,n),g.pluck(g.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var w=function(t){return function(e,n,r){var i={};return n=y(n,r),g.each(e,function(r,s){var a=n(r,s,e);t(i,r,a)}),i}};g.groupBy=w(function(t,e,n){g.has(t,n)?t[n].push(e):t[n]=[e]}),g.indexBy=w(function(t,e,n){t[n]=e}),g.countBy=w(function(t,e,n){g.has(t,n)?t[n]++:t[n]=1}),g.sortedIndex=function(t,e,n,r){n=y(n,r);for(var i=n(e),s=0,a=t.length;a>s;){var o=s+a>>>1;n(t[o])<i?s=o+1:a=o}return s},g.toArray=function(t){return t?g.isArray(t)?l.call(t):t.length===+t.length?g.map(t,g.identity):g.values(t):[]},g.size=function(t){return null==t?0:t.length===+t.length?t.length:g.keys(t).length},g.first=g.head=g.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:l.call(t,0,e)},g.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},g.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},g.rest=g.tail=g.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},g.compact=function(t){return g.filter(t,g.identity)};var _=function(t,e,n,r){if(e&&g.every(t,g.isArray))return c.apply(r,t);for(var i=0,s=t.length;s>i;i++){var a=t[i];g.isArray(a)||g.isArguments(a)?e?u.apply(r,a):_(a,e,n,r):n||r.push(a)}return r};g.flatten=function(t,e){return _(t,e,!1,[])},g.without=function(t){return g.difference(t,l.call(arguments,1))},g.partition=function(t,e,n){e=y(e,n);var r=[],i=[];return g.each(t,function(t,n,s){(e(t,n,s)?r:i).push(t)}),[r,i]},g.uniq=g.unique=function(t,e,n,r){if(null==t)return[];g.isFunction(e)&&(r=n,n=e,e=!1);for(var i=[],s=[],a=0,o=t.length;o>a;a++){var u=t[a];n&&(u=n.call(r,u,a,t)),(e?a&&s===u:g.contains(s,u))||(e?s=u:s.push(u),i.push(t[a]))}return i},g.union=function(){return g.uniq(_(arguments,!0,!0,[]))},g.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,r=0,i=t.length;i>r;r++){var s=t[r];if(!g.contains(e,s)){for(var a=1;n>a&&g.contains(arguments[a],s);a++);a===n&&e.push(s)}}return e},g.difference=function(t){var e=_(l.call(arguments,1),!0,!0,[]);return g.filter(t,function(t){return!g.contains(e,t)})},g.zip=function(){for(var t=g.max(g.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=g.pluck(arguments,""+n);return e},g.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},g.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=g.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(t[r]===e)return r;return-1},g.lastIndexOf=function(t,e,n){if(null==t)return-1;for(var r=null==n?t.length:n;r--;)if(t[r]===e)return r;return-1},g.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,s=new Array(r);r>i;)s[i++]=t,t+=n;return s};var b=function(){};g.bind=function(t,e){var n,r;if(v&&t.bind===v)return v.apply(t,l.call(arguments,1));if(!g.isFunction(t))throw new TypeError("Bind must be called on a function");return n=l.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(l.call(arguments)));b.prototype=t.prototype;var i=new b;b.prototype=null;var s=t.apply(i,n.concat(l.call(arguments)));return Object(s)===s?s:i}},g.partial=function(t){var e=l.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,s=r.length;s>i;i++)r[i]===g&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},g.bindAll=function(t){var e=l.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return g.each(e,function(e){t[e]=g.bind(t[e],t)}),t},g.memoize=function(t,e){var n={};return e||(e=g.identity),function(){var r=e.apply(this,arguments);return g.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},g.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},g.defer=function(t){return g.delay.apply(g,[t,1].concat(l.call(arguments,1)))},g.throttle=function(t,e,n){var r,i,s,a=null,o=0;n||(n={});var u=function(){o=n.leading===!1?0:g.now(),a=null,s=t.apply(r,i),r=i=null};return function(){var l=g.now();o||n.leading!==!1||(o=l);var c=e-(l-o);return r=this,i=arguments,0>=c||c>e?(clearTimeout(a),a=null,o=l,s=t.apply(r,i),r=i=null):a||n.trailing===!1||(a=setTimeout(u,c)),s}},g.debounce=function(t,e,n){var r,i,s,a,o,u=function(){var l=g.now()-a;e>l&&l>0?r=setTimeout(u,e-l):(r=null,n||(o=t.apply(s,i),s=i=null))};return function(){s=this,i=arguments,a=g.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(o=t.apply(s,i),s=i=null),o}},g.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},g.wrap=function(t,e){return g.partial(e,t)},g.negate=function(t){return function(){return!t.apply(this,arguments)}},g.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},g.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},g.keys=function(t){if(!g.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)g.has(t,n)&&e.push(n);return e},g.values=function(t){for(var e=g.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},g.pairs=function(t){for(var e=g.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},g.invert=function(t){for(var e={},n=g.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},g.functions=g.methods=function(t){var e=[];for(var n in t)g.isFunction(t[n])&&e.push(n);return e.sort()},g.extend=function(t){return g.isObject(t)?(g.each(l.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t):t},g.pick=function(t,e,n){var r={};if(g.isFunction(e))for(var i in t){var s=t[i];e.call(n,s,i,t)&&(r[i]=s)}else for(var a=c.apply([],l.call(arguments,1)),o=0,u=a.length;u>o;o++){var i=a[o];i in t&&(r[i]=t[i])}return r},g.omit=function(t,e,n){var r;return g.isFunction(e)?e=g.negate(e):(r=g.map(c.apply([],l.call(arguments,1)),String),e=function(t,e){return!g.contains(r,e)}),g.pick(t,e,n)},g.defaults=function(t){return g.isObject(t)?(g.each(l.call(arguments,1),function(e){for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t):t},g.clone=function(t){return g.isObject(t)?g.isArray(t)?t.slice():g.extend({},t):t},g.tap=function(t,e){return e(t),t};var x=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof g&&(t=t._wrapped),e instanceof g&&(e=e._wrapped);var i=h.call(t);if(i!=h.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return r[s]==e;var a=t.constructor,o=e.constructor;if(a!==o&&!(g.isFunction(a)&&a instanceof a&&g.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),r.push(e);var u=0,l=!0;if("[object Array]"==i){if(u=t.length,l=u==e.length)for(;u--&&(l=x(t[u],e[u],n,r)););}else{for(var c in t)if(g.has(t,c)&&(u++,!(l=g.has(e,c)&&x(t[c],e[c],n,r))))break;if(l){for(c in e)if(g.has(e,c)&&!u--)break;l=!u}}return n.pop(),r.pop(),l};g.isEqual=function(t,e){return x(t,e,[],[])},g.isEmpty=function(t){if(null==t)return!0;if(g.isArray(t)||g.isString(t)||g.isArguments(t))return 0===t.length;for(var e in t)if(g.has(t,e))return!1;return!0},g.isElement=function(t){return!(!t||1!==t.nodeType)},g.isArray=d||function(t){return"[object Array]"==h.call(t)},g.isObject=function(t){return t===Object(t)},g.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){g["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),g.isArguments(arguments)||(g.isArguments=function(t){return!(!t||!g.has(t,"callee"))}),"function"!=typeof/./&&(g.isFunction=function(t){return"function"==typeof t}),g.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},g.isNaN=function(t){return g.isNumber(t)&&t!=+t},g.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},g.isNull=function(t){return null===t},g.isUndefined=function(t){return void 0===t},g.has=function(t,e){return f.call(t,e)},g.noConflict=function(){return n._=r,this},g.identity=function(t){return t},g.constant=function(t){return function(){return t}},g.noop=function(){},g.property=function(t){return function(e){return e[t]}},g.matches=function(t){return function(e){if(null==e)return g.isEmpty(t);if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},g.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},g.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},g.now=Date.now||function(){return(new Date).getTime()};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};E.unescape=g.invert(E.escape);var T={escape:new RegExp("["+g.keys(E.escape).join("")+"]","g"),unescape:new RegExp("("+g.keys(E.unescape).join("|")+")","g")};g.each(["escape","unescape"],function(t){g[t]=function(e){return null==e?"":(""+e).replace(T[t],function(e){return E[t][e]})}}),g.result=function(t,e){if(null==t)return void 0;var n=t[e];return g.isFunction(n)?t[e]():n},g.mixin=function(t){g.each(g.functions(t),function(e){var n=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),S.call(this,n.apply(g,t))}})};var k=0;g.uniqueId=function(t){var e=++k+"";return t?t+e:e},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,C={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,N=function(t){return"\\"+C[t]};g.template=function(t,e,n){n=g.defaults({},n,g.templateSettings);var r=new RegExp([(n.escape||A).source,(n.interpolate||A).source,(n.evaluate||A).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(r,function(e,n,r,a,o){return s+=t.slice(i,o).replace(j,N),i=o+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(s+="';\n"+a+"\n__p+='"),e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var a=new Function(n.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(e)return a(e,g);var u=function(t){return a.call(this,t,g)},l=n.variable||"obj";return u.source="function("+l+"){\n"+s+"}",u},g.chain=function(t){return g(t).chain()};var S=function(t){return this._chain?g(t).chain():t};g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];g.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],S.call(this,n)}}),g.each(["concat","join","slice"],function(t){var e=s[t];g.prototype[t]=function(){return S.call(this,e.apply(this._wrapped,arguments))}}),g.extend(g.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&(e=function(){return g}())}.call(this),t}({}),n=function(e){var n=this,r=e,i=t,s=window.$,a=n.Backbone,o=[],u=o.slice;r.VERSION="1.1.2",r.$=s,r.noConflict=function(){return n.Backbone=a,this},r.emulateHTTP=!1,r.emulateJSON=!1;var l=r.Events={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var r=this,s=i.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(var r=t?[t]:i.keys(this._events),s=0,a=r.length;a>s;s++){t=r[s];var o=this._events[t];if(o)if(e||n){for(var u=[],l=0,c=o.length;c>l;l++){var f=o[l];(e&&e!==f.callback&&e!==f.callback._callback||n&&n!==f.context)&&u.push(f)}u.length?this._events[t]=u:delete this._events[t]}else delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&f(n,e),r&&f(r,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var a in r)t=r[a],t.off(e,n,this),(s||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},c=/\s+/,h=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var s=n.split(c),a=0,o=s.length;o>a;a++)t[e].apply(t,[s[a]].concat(r));return!1}return!0},f=function(t,e){var n,r=-1,i=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,a,o);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(t,e){l[e]=function(e,n,r){var s=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return s[a]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),l.bind=l.on,l.unbind=l.off,i.extend(r,l);var p=r.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,s,a,o,u,l,c,h;if(null==t)return this;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;a=n.unset,u=n.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],i.isEqual(h[r],e)||o.push(r),i.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,a?delete h[r]:h[r]=e;if(!u){o.length&&(this._pending=n);for(var f=0,d=o.length;d>f;f++)this.trigger("change:"+o[f],this,h[o[f]],n)}if(l)return this;if(!u)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)i.isEqual(r[s],e=t[s])||((n||(n={}))[s]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return e.set(e.parse(r,t),t)?(n&&n(e,r,t),void e.trigger("sync",e,r,t)):!1},R(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,s,a,o=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},o,r)),void 0===n.parse&&(n.parse=!0);var u=this,l=n.success;return n.success=function(t){u.attributes=o;var e=u.parse(t,n);return n.wait&&(e=i.extend(r||{},e)),i.isObject(e)&&!u.set(e,n)?!1:(l&&l(u,t,n),void u.trigger("sync",u,t,n))},R(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=r),a=this.sync(s,this,n),r&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;R(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||B();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];i.each(v,function(t){i[t]&&(p.prototype[t]=function(){var e=u.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)})});var g=r.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};i.extend(g.prototype,l,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return r.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,y))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});for(var r=0,s=t.length;s>r;r++){var a=t[r]=this.get(t[r]);if(a){delete this._byId[a.id],delete this._byId[a.cid];var o=this.indexOf(a);this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e)}}return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:t.slice();for(var r,s,a,o,u,l=e.at,c=this.comparator&&null==l&&e.sort!==!1,h=i.isString(this.comparator)?this.comparator:null,f=[],d=[],p={},v=e.add,g=e.merge,y=e.remove,w=!c&&v&&y?[]:!1,_=0,b=t.length;b>_;_++){if(a=t[_]||{},r=this._isModel(a)?s=a:a[this.model.prototype.idAttribute||"id"],o=this.get(r))y&&(p[o.cid]=!0),g&&(a=a===s?s.attributes:a,e.parse&&(a=o.parse(a,e)),o.set(a,e),c&&!u&&o.hasChanged(h)&&(u=!0)),t[_]=o;else if(v){if(s=t[_]=this._prepareModel(a,e),!s)continue;f.push(s),this._addReference(s,e)}s=o||s,s&&(!w||!s.isNew()&&p[s.id]||w.push(s),p[s.id]=!0)}if(y){for(var _=0,b=this.length;b>_;_++)p[(s=this.models[_]).cid]||d.push(s);d.length&&this.remove(d,e)}if(f.length||w&&w.length)if(c&&(u=!0),this.length+=f.length,null!=l)for(var _=0,b=f.length;b>_;_++)this.models.splice(l+_,0,f[_]);else{w&&(this.models.length=0);for(var x=w||f,_=0,b=x.length;b>_;_++)this.models.push(x[_])}if(u&&this.sort({silent:!0}),!e.silent){for(var _=0,b=f.length;b>_;_++)(s=f[_]).trigger("add",s,this,e);(u||w&&w.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return u.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){var i=t.reset?"reset":"set";n[i](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_isModel:function(t){return t instanceof p},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];i.each(w,function(t){i[t]&&(g.prototype[t]=function(){var e=u.call(arguments);return e.unshift(this.models),i[t].apply(i,e)})});var _=["groupBy","countBy","sortBy","indexBy"];i.each(_,function(t){i[t]&&(g.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)})});var b=r.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments)},x=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof r.$?t:r.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var r=e.match(x);this.delegate(r[1],r[2],i.bind(n,this))}}return this},delegate:function(t,e,n){this.$el.on(t+".delegateEvents"+this.cid,e,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){this.$el.off(t+".delegateEvents"+this.cid,e,n)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),r.sync=function(t,e,n){var s=k[t];i.defaults(n||(n={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var a={type:s,dataType:"json"};if(n.url||(a.url=i.result(e,"url")||B()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),n.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",n.emulateJSON&&(a.data._method=s);var o=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===a.type||n.emulateJSON||(a.processData=!1),"PATCH"===a.type&&T&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=n.error;n.error=function(t,e,r){n.textStatus=e,n.errorThrown=r,u&&u.apply(this,arguments)};var l=n.xhr=r.ajax(i.extend(a,n));return e.trigger("request",e,l,n),l};var T=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var A=r.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,j=/(\(\?)?:\w+/g,N=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(A.prototype,l,{initialize:function(){},route:function(t,e,n){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(e)&&(n=e,e=""),n||(n=this[e]);var s=this;return r.history.route(t,function(i){var a=s._extractParameters(t,i);s.execute(n,a,e)!==!1&&(s.trigger.apply(s,["route:"+e].concat(a)),s.trigger("route",e,a),r.history.trigger("route",s,e,a))}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return r.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(S,"\\$&").replace(C,"(?:$1)?").replace(j,function(t,e){return e?t:"([^/?]+)"}).replace(N,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var O=r.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,$=/^\/+|\/+$/g,H=/#.*$/;O.started=!1,i.extend(O.prototype,l,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.location.search},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=decodeURI(this.location.pathname+this.location.search),e=this.root.slice(0,-1);return t.indexOf(e)||(t=t.slice(e.length)),t.slice(1)},getFragment:function(t){return null==t&&(t=this._hasPushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(I,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var e=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this.root=("/"+this.root+"/").replace($,"/"),!(this._hasHashChange||!this._wantsHashChange||this._wantsPushState&&this._hasPushState)){var n=document.createElement("iframe");n.src="javascript:0",n.style.display="none",n.tabIndex=-1;var r=document.body;this.iframe=r.insertBefore(n,r.firstChild).contentWindow,this.navigate(this.fragment)}if(this._hasPushState?e("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe?e("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;
this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}return this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._hasPushState?t("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!O.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=decodeURI(t.replace(H,"")),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe)&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),r.history=new O;var M=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var s=function(){this.constructor=n};return s.prototype=r.prototype,n.prototype=new s,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};p.extend=g.extend=A.extend=b.extend=O.extend=M;var B=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return e}({}),r=function(t){var e;return e={browser:function(t){var e,n,r,i="",s="";return(e=t.match(/(Android)\s+([\d.]+)/))&&(i="android")&&(s=e[2])||(n=t.match(/(iPad).*OS\s([\d_]+)/))&&(i="ipad")&&(s=n[2].replace(/_/g,"."))||(r=!n&&t.match(/(iPhone\sOS)\s([\d_]+)/))&&(i="iphone")&&(s=r[2].replace(/_/g,".")),{device:i,version:s.split("."),mainVer:s.replace(/^(\d\.\d).*$/,"$1")}}(navigator.userAgent),log:function(t){var e=document.getElementById("test_log_element");if(null!=e)e.innerHTML+="<br />"+t;else{var n=document.createElement("span");n.id="test_log_element",n.innerHTML=t,n.style.cssText="position:fixed;left:0;top:0;background:rgba(0,0,0,.5);color:#fff;padding:5px",document.body.appendChild(n)}},toDecimal:function(t){var e=parseFloat(t);if(!isNaN(e))return e=Math.round(100*t)/100}},t=e}(),i=function(){var t=window.$,e=n,r=e.Model.extend({defaults:{id:"1",name:"k\u6b4c\u4e4b\u738b",src:"555",singer:"eason",lrc:""},fetch:function(e){var n=this;t.ajax({url:"data/"+e+".json",type:"GET",dataType:"json",error:function(){alert("error")},success:function(t){n.set({id:t.id,name:t.name,src:t.src,singer:t.singer,lrc:t.lrc}),n.trigger("fetchCompleted:oneMusic")},complete:function(){}})}});return r}(),s=function(){function t(t){var e=document.createElement("div");e.innerHTML=t;for(var n=document.createDocumentFragment(),r=0;r<e.childNodes.length;r++){var i=e.childNodes[r].cloneNode(!0);n.appendChild(i)}return n.childNodes}var e=(window.$,n),r='<!--ptpl-text!./homeView.html--><div class="home"><p>\u8fd9\u662f\u4e2a\u97f3\u4e50\u7684web app \uff0c\u4f7f\u7528 backbone \u6784\u9020\uff0c\u4f7f\u7528seajs\u7ba1\u7406\u4f9d\u8d56\u3002</p><p><a href="#list">\u97f3\u4e50\u5217\u8868 &gt;</a></p><p><a href="#other">\u5176\u4ed6 &gt;</a></p></div>',i=e.View.extend({el:".bd",render:function(){return this.html=r,this.domref=t(r),this}});return i}(),a=function(){var e=(window.$,t),r=n,i='<!--ptpl-text!./listView.html--><div class="lists"><ul><% for (var i = 0; i < data.length; i++) { %><% var item = data[i]; %><li><a href="#detail/<%=item.name%>/<%= item.id%>"><%= item.name %></a></li><% } %></ul><p><a href="#other1">\u5176\u4ed6\u89c6\u56fe1 &gt;</a></p></div>',s=r.View.extend({template:e.template(i),initialize:function(){this.collection.bind("fetchCompleted:allMusics",this.render,this)},el:".bd",render:function(){return console.log(this.template),this.html=this.template({data:this.collection.toJSON()}),this.trigger("renderCompleted:list",this,"this is list view"),this}});return s}(),o=function(){var e=window.$,r=t,i=n,s='<!--ptpl-text!./detailView.html--><div class="player"><div class="info"><span class="name"><%= name %></span><span class="singer">--<%= singer %></span><span class="lrc-btn">\u6b4c\u8bcd</span><audio class="none" src="<%= src %>"></audio></div><div class="ctrl"><span class="c-btn play"></span><span class="proBar"><b></b></span><span class="time"></span></div><div class="lrc none"><div class="lrc-text"><%= lrc %></div></div></div>',a=i.View.extend({template:r.template(s),initialize:function(){this.model.bind("fetchCompleted:oneMusic",this.render,this)},el:".bd",render:function(){var t=e(".player-box");return t.removeClass("none"),t.html(this.template(this.model.toJSON())),this.music_player(),this},music_player:function(){var t=this,n=e(".player");t.audioEle=n.find("audio"),t.ctrlBtn=n.find(".c-btn"),t.proBar=n.find(".proBar"),t.timeEle=n.find(".time");var r,i=t.ctrlBar=t.proBar.find("b"),s=t.proBarW=t.proBar.width()-2,a=function(t){var e,n,r=parseInt(t/60),i=Math.round(t%60);return e=10>r?"0"+r:r,n=10>i?"0"+i:i,{show:e+":"+n,ts:parseInt(Math.round(t))}},o=function(){t.audioEle[0].play(),r=setInterval(function(){l(parseInt(t.timeEle.attr("time"))-1)},1e3),t.ctrlBtn.removeClass("play").addClass("pause"),t.lrcTxt.hasClass("haveloaded")&&f(t.lrcObj)},u=function(){t.audioEle[0].pause(),clearInterval(r),t.ctrlBtn.removeClass("pause").addClass("play")},l=function(e){var n=a(e);t.timeEle.text(n.show),t.timeEle.attr("time",n.ts),n.ts<=0&&clearInterval(r)};this.audioEle.on("durationchange",function(){t.dtime=t.audioEle.attr("duration"),isNaN(t.dtime)||l(t.dtime)}),this.audioEle.on("canplay",function(){t.ctrlBtn.on("click",function(){t.ctrlBtn.hasClass("play")?o():u()}).trigger("click")}),this.audioEle.on("ended",function(){t.ctrlBtn.removeClass("pause").addClass("play"),t.timeEle.attr("time",Math.round(t.dtime)),clearInterval(r)}),this.audioEle.on("timeupdate",function(){var e=t.audioEle.attr("currentTime");i.css({left:parseInt(s*e/t.dtime)})}),this.proBar.on("click",function(e){var n=e.offsetX*t.dtime/s;t.audioEle[0].currentTime=n,l(t.dtime-n),clearInterval(r),o(),i.css({left:e.offsetX}),t.lrcTxt.hasClass("haveloaded")&&f(t.lrcObj)}),this.lrcEle=n.find(".lrc"),this.lrcBtn=n.find(".lrc-btn"),this.lrcTxt=n.find(".lrc-text");var c;this.lrcBtn.on("click",function(){t.lrcEle.toggle(),!t.lrcTxt.hasClass("haveloaded")&&e.ajax({url:t.lrcTxt.text(),type:"GET",dataType:"text",error:function(){alert("\u627e\u4e0d\u5230\u6b4c\u8bcd")},success:function(e){t.lrcTxt.addClass("haveloaded");var n=t.lrcObj=d(e);t.lrcTxt.html(n.htmArr.join("")),c=parseInt(t.lrcTxt.find("p").height()),f(n,!0)}})});var h,f=function(e,n){var r=e,i=parseFloat(t.audioEle.attr("currentTime")),s=r.timeArr.length;if(!isNaN(i)){if(i>=r.timeArr[s-1])return t.lrcTxt.css({top:-(s-1)*c}),t.lrcTxt.find("p").removeClass("cur"),void t.lrcTxt.find("p").eq(s).addClass("cur");for(var a=0;s-1>a;a++)i>=r.timeArr[a]&&i<r.timeArr[a+1]&&(t.lrcTxt.css({top:-(a-1)*c}),t.lrcTxt.find("p").removeClass("cur"),t.lrcTxt.find("p").eq(a).addClass("cur"),h=a)}var o=function(){var e=t.audioEle.attr("currentTime");if(s>h){if(e>=r.timeArr[s-1])return t.lrcTxt.css({top:-(s-1)*c}),t.lrcTxt.find("p").removeClass("cur"),void t.lrcTxt.find("p").eq(s).addClass("cur");e>r.timeArr[h]&&e<r.timeArr[h+1]&&(t.lrcTxt.css({top:-(h-1)*c}),t.lrcTxt.find("p").removeClass("cur"),t.lrcTxt.find("p").eq(h).addClass("cur"),h+=1)}};n&&t.audioEle.on("timeupdate",o)},d=function(t){var e=[],n=[],r=[],i=[],s=[];t=t.replace(/\n/g,""),r=t.split("[");for(var a=0;a<r.length;a++)if(i=r[a].split("]"),2==i.length){if(s=i[0].split(":"),2==s.length){var o=60*parseInt(s[0])+parseFloat(s[1]);e.push(o)}n.push("<p>"+i[1]+"</p>")}return{timeArr:e,htmArr:n}}}});return a}(),u=function(){var t=(window.$,n),e='<!--ptpl-text!./otherView.html--><div class="home"><p>\u5176\u4ed6\u89c6\u56fe\u3002\u3002\u3002</p><p><a href="#list">\u97f3\u4e50\u5217\u8868 &gt;</a></p></div>',r=t.View.extend({el:".bd",render:function(){return this.html=e,this}});return r}(),l=function(){var t=(window.$,n),e='<!--ptpl-text!./otherView1.html--><div class="home"><p>\u5176\u4ed6\u89c6\u56fe1111111111\u3002\u3002\u3002</p></div>',r=t.View.extend({el:".bd",render:function(){return this.html=e,this}});return r}(),c=function(){var t=window.$,e=n,r=i,s=e.Collection.extend({model:r,fetch:function(){var e,n=this;t.ajax({url:"data/list.json",type:"GET",dataType:"json",error:function(){alert("error")},success:function(i){t.each(i,function(t,i){e=new r({id:i.id,name:i.name}),n.add(e)}),n.trigger("fetchCompleted:allMusics")}})}});return s}(),h=function(t){var e=window.$,r=n,h=c,f=i,d=s,p=a,v=o,g=u,m=l,y=r.Router.extend({routes:{"":"showHome",home:"showHome",list:"showList","detail/:name/:id":"showDetail",other:"showOther",other1:"showOther1","*actions":"defaultAction"},defaultAction:function(){},showOther:function(){var t=new g;t.render(),this.triggerChangeView(t,"this is other view")},showOther1:function(){var t=new m;t.render(),this.triggerChangeView(t,"this is other1 view")},showHome:function(){var t=new d;t.render(),this.triggerChangeView(t,"this is home view")},showList:function(){var t=new h,e=new p({collection:t});e.bind("renderCompleted:list",this.triggerChangeView,this),t.fetch()},showDetail:function(t,e){{var n=new f;new v({model:n})}n.fetch(e)},viewCollect:[],showEle:[],viewNum:0,curEle:"",initialize:function(){var t=this,n=e(".bd");n.on("webkitTransitionEnd",function(){n.attr("style","");var r=n.children();r.each(function(n){var i=e(r[n]),s=i.attr("viewNum");i.addClass("none"),s==t.curEle.attr("viewNum")&&i.removeClass("none")})})},changeView:function(t){var n=this,r=e(t.el),i=r.children(),s=(i.length,function(){n.showEle.length<2||(parseInt(n.showEle[0])>parseInt(n.showEle[1])?(r.css({width:"200%","-webkit-transform":"translateX(-50%)"}),setTimeout(function(){r.css({"-webkit-transition":"-webkit-transform .5s ease-out","-webkit-transform":"translateX(0px)"})},10)):(r.css({width:"200%","-webkit-transition":"-webkit-transform .5s ease-out","-webkit-transform":"translateX(0px)"}),setTimeout(function(){r.css({"-webkit-transform":"translateX(-50%)"})},10)))});this.showEle.length>2&&(this.showEle.shift(),i.each(function(t){var r=e(i[t]),s=r.attr("viewNum");(s==n.showEle[0]||s==n.showEle[1])&&r.removeClass("none")})),s()},triggerChangeView:function(t){for(var n=e(t.el),r=n.children(),i=this.viewCollect,s=i.length,a=this.viewNum+"",o=0;s>o;o++)if(t.html==i[o])return this.curEle=r.eq(o),a=this.curEle.attr("viewNum"),this.showEle.push(a),void this.changeView(t);var u=e(t.html).attr("viewNum",a),l=e("<div></div>").html(u).html();i.push(t.html),n.append(l),this.curEle=e(l),console.log(this.curEle.attr("viewNum")),this.showEle.push(a),this.changeView(t),this.viewNum++}});return t=y}(),f=function(){function t(){new r;e.history.start()}var e=(window.$,n),r=h;t()}()}();